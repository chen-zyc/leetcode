- [209. é•¿åº¦æœ€å°çš„å­æ•°ç»„](#209-é•¿åº¦æœ€å°çš„å­æ•°ç»„)
  - [é¢˜ç›®](#é¢˜ç›®)
  - [é¢˜è§£](#é¢˜è§£)
    - [æ–¹æ³•ä¸€ï¼šæš´åŠ›æ³•](#æ–¹æ³•ä¸€æš´åŠ›æ³•)
    - [æ–¹æ³•äºŒï¼šå‰ç¼€å’Œ + äºŒåˆ†æŸ¥æ‰¾](#æ–¹æ³•äºŒå‰ç¼€å’Œ--äºŒåˆ†æŸ¥æ‰¾)
    - [æ–¹æ³•ä¸‰ï¼šåŒæŒ‡é’ˆ](#æ–¹æ³•ä¸‰åŒæŒ‡é’ˆ)

------------------------------

# 209. é•¿åº¦æœ€å°çš„å­æ•°ç»„

## é¢˜ç›®

ç»™å®šä¸€ä¸ªå«æœ‰ n ä¸ªæ­£æ•´æ•°çš„æ•°ç»„å’Œä¸€ä¸ªæ­£æ•´æ•° s ï¼Œæ‰¾å‡ºè¯¥æ•°ç»„ä¸­æ»¡è¶³å…¶å’Œ â‰¥ s çš„é•¿åº¦æœ€å°çš„è¿ç»­å­æ•°ç»„ï¼Œå¹¶è¿”å›å…¶é•¿åº¦ã€‚å¦‚æœä¸å­˜åœ¨ç¬¦åˆæ¡ä»¶çš„è¿ç»­å­æ•°ç»„ï¼Œè¿”å› 0ã€‚

ç¤ºä¾‹: 

```
è¾“å…¥: s = 7, nums = [2,3,1,2,4,3]
è¾“å‡º: 2
è§£é‡Š: å­æ•°ç»„ [4,3] æ˜¯è¯¥æ¡ä»¶ä¸‹çš„é•¿åº¦æœ€å°çš„è¿ç»­å­æ•°ç»„ã€‚
```

è¿›é˜¶:

å¦‚æœä½ å·²ç»å®Œæˆäº†O(n) æ—¶é—´å¤æ‚åº¦çš„è§£æ³•, è¯·å°è¯• O(n log n) æ—¶é—´å¤æ‚åº¦çš„è§£æ³•ã€‚

- æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰
- é“¾æ¥ï¼šhttps://leetcode-cn.com/problems/minimum-size-subarray-sum
- è‘—ä½œæƒå½’é¢†æ‰£ç½‘ç»œæ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»å®˜æ–¹æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚

## é¢˜è§£

åˆšå¼€å§‹æ˜¯æƒ³ç”¨æœ€å°è¿ç»­å­æ•°ç»„é‚£ç§è§£æ³•ï¼Œä¸è¿‡å¯èƒ½æ˜¯ä¹‹å‰åšè¿‡æ»‘åŠ¨çª—å£çš„é¢˜ï¼Œæ‰€ä»¥æƒ³ç”¨æ»‘åŠ¨çª—å£è¯•è¯•ï¼Œæ²¡æƒ³åˆ°ä¸€æ¬¡å°±æˆåŠŸäº†ï¼Œè€¶âœŒğŸ»ã€‚

> é“¾æ¥ï¼šhttps://leetcode-cn.com/problems/minimum-size-subarray-sum/solution/chang-du-zui-xiao-de-zi-shu-zu-by-leetcode-solutio/

### æ–¹æ³•ä¸€ï¼šæš´åŠ›æ³•

æš´åŠ›æ³•æ˜¯æœ€ç›´è§‚çš„æ–¹æ³•ã€‚åˆå§‹åŒ–å­æ•°ç»„çš„æœ€å°é•¿åº¦ä¸ºæ— ç©·å¤§ï¼Œæšä¸¾æ•°ç»„ $\text{nums}$ ä¸­çš„æ¯ä¸ªä¸‹æ ‡ä½œä¸ºå­æ•°ç»„çš„å¼€å§‹ä¸‹æ ‡ï¼Œå¯¹äºæ¯ä¸ªå¼€å§‹ä¸‹æ ‡ $i$ï¼Œéœ€è¦æ‰¾åˆ°å¤§äºæˆ–ç­‰äº $i$ çš„æœ€å°ä¸‹æ ‡ $j$ï¼Œä½¿å¾—ä» $\text{nums}[i]$ åˆ° $\text{nums}[j]$ çš„å…ƒç´ å’Œå¤§äºæˆ–ç­‰äº $s$ï¼Œå¹¶æ›´æ–°å­æ•°ç»„çš„æœ€å°é•¿åº¦ï¼ˆæ­¤æ—¶å­æ•°ç»„çš„é•¿åº¦æ˜¯ $j-i+1$ï¼‰ã€‚

æ³¨æ„ï¼šä½¿ç”¨ Python è¯­è¨€å®ç°æ–¹æ³•ä¸€ä¼šè¶…å‡ºæ—¶é—´é™åˆ¶ã€‚

```go
func minSubArrayLen(s int, nums []int) int {
    n := len(nums)
    if n == 0 {
        return 0
    }
    ans := math.MaxInt32
    for i := 0; i < n; i++ {
        sum := 0
        for j := i; j < n; j++ {
            sum += nums[j]
            if sum >= s {
                ans = min(ans, j - i + 1)
                break
            }
        }
    }
    if ans == math.MaxInt32 {
        return 0
    }
    return ans
}

func min(x, y int) int {
    if x < y {
        return x
    }
    return y
}
```

å¤æ‚åº¦åˆ†æ

- æ—¶é—´å¤æ‚åº¦ï¼š$O(n^2)$ï¼Œå…¶ä¸­ $n$ æ˜¯æ•°ç»„çš„é•¿åº¦ã€‚éœ€è¦éå†æ¯ä¸ªä¸‹æ ‡ä½œä¸ºå­æ•°ç»„çš„å¼€å§‹ä¸‹æ ‡ï¼Œå¯¹äºæ¯ä¸ªå¼€å§‹ä¸‹æ ‡ï¼Œéœ€è¦éå†å…¶åé¢çš„ä¸‹æ ‡å¾—åˆ°é•¿åº¦æœ€å°çš„å­æ•°ç»„ã€‚
- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$ã€‚

### æ–¹æ³•äºŒï¼šå‰ç¼€å’Œ + äºŒåˆ†æŸ¥æ‰¾

æ–¹æ³•ä¸€çš„æ—¶é—´å¤æ‚åº¦æ˜¯ $O(n^2)$ï¼Œå› ä¸ºåœ¨ç¡®å®šæ¯ä¸ªå­æ•°ç»„çš„å¼€å§‹ä¸‹æ ‡åï¼Œæ‰¾åˆ°é•¿åº¦æœ€å°çš„å­æ•°ç»„éœ€è¦ $O(n)$ çš„æ—¶é—´ã€‚å¦‚æœä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ï¼Œåˆ™å¯ä»¥å°†æ—¶é—´ä¼˜åŒ–åˆ° $O(\log n)$ã€‚

ä¸ºäº†ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ï¼Œéœ€è¦é¢å¤–åˆ›å»ºä¸€ä¸ªæ•°ç»„ $\text{sums}$ ç”¨äºå­˜å‚¨æ•°ç»„ $\text{nums}$ çš„å‰ç¼€å’Œï¼Œå…¶ä¸­ $\text{sums}[i]$ è¡¨ç¤ºä» $\text{nums}[0]$ åˆ° $\text{nums}[i-1]$ çš„å…ƒç´ å’Œã€‚å¾—åˆ°å‰ç¼€å’Œä¹‹åï¼Œå¯¹äºæ¯ä¸ªå¼€å§‹ä¸‹æ ‡ iï¼Œå¯é€šè¿‡äºŒåˆ†æŸ¥æ‰¾å¾—åˆ°å¤§äºæˆ–ç­‰äº i çš„æœ€å°ä¸‹æ ‡ $\textit{bound}$ï¼Œä½¿å¾— $\text{sums}[\textit{bound}]-\text{sums}[i-1] \ge s$ï¼Œå¹¶æ›´æ–°å­æ•°ç»„çš„æœ€å°é•¿åº¦ï¼ˆæ­¤æ—¶å­æ•°ç»„çš„é•¿åº¦æ˜¯ $\textit{bound}-(i-1)$ï¼‰ã€‚

å› ä¸ºè¿™é“é¢˜ä¿è¯äº†æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ éƒ½ä¸ºæ­£ï¼Œæ‰€ä»¥å‰ç¼€å’Œä¸€å®šæ˜¯é€’å¢çš„ï¼Œè¿™ä¸€ç‚¹ä¿è¯äº†äºŒåˆ†çš„æ­£ç¡®æ€§ã€‚**å¦‚æœé¢˜ç›®æ²¡æœ‰è¯´æ˜æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ éƒ½ä¸ºæ­£ï¼Œè¿™é‡Œå°±ä¸èƒ½ä½¿ç”¨äºŒåˆ†æ¥æŸ¥æ‰¾è¿™ä¸ªä½ç½®äº†**ã€‚

åœ¨å¾ˆå¤šè¯­è¨€ä¸­ï¼Œéƒ½æœ‰ç°æˆçš„åº“å’Œå‡½æ•°æ¥ä¸ºæˆ‘ä»¬å®ç°è¿™é‡ŒäºŒåˆ†æŸ¥æ‰¾å¤§äºç­‰äºæŸä¸ªæ•°çš„ç¬¬ä¸€ä¸ªä½ç½®çš„åŠŸèƒ½ï¼Œæ¯”å¦‚ C++ çš„ `lower_bound`ï¼ŒJava ä¸­çš„ `Arrays.binarySearch`ï¼ŒC# ä¸­çš„ `Array.BinarySearch`ï¼ŒPython ä¸­çš„ `bisect.bisect_left`ã€‚ä½†æ˜¯æœ‰æ—¶é¢è¯•å®˜å¯èƒ½ä¼šè®©æˆ‘ä»¬è‡ªå·±å®ç°ä¸€ä¸ªè¿™æ ·çš„äºŒåˆ†æŸ¥æ‰¾å‡½æ•°ï¼Œè¿™é‡Œç»™å‡ºä¸€ä¸ª C# çš„ç‰ˆæœ¬ï¼Œä¾›è¯»è€…å‚è€ƒï¼š

```c#
private int LowerBound(int[] a, int l, int r, int target) 
{
    int mid = -1, originL = l, originR = r;
    while (l < r) 
    {
        mid = (l + r) >> 1;
        if (a[mid] < target) l = mid + 1;
        else r = mid;
    } 

    return (a[l] >= target) ? l : -1;
}
```

ä¸‹é¢æ˜¯è¿™é“é¢˜çš„ä»£ç ã€‚

```go
func minSubArrayLen(s int, nums []int) int {
    n := len(nums)
    if n == 0 {
        return 0
    }
    ans := math.MaxInt32
    sums := make([]int, n + 1)
    // ä¸ºäº†æ–¹ä¾¿è®¡ç®—ï¼Œä»¤ size = n + 1 
    // sums[0] = 0 æ„å‘³ç€å‰ 0 ä¸ªå…ƒç´ çš„å‰ç¼€å’Œä¸º 0
    // sums[1] = A[0] å‰ 1 ä¸ªå…ƒç´ çš„å‰ç¼€å’Œä¸º A[0]
    // ä»¥æ­¤ç±»æ¨
    for i := 1; i <= n; i++ {
        sums[i] = sums[i - 1] + nums[i - 1]
    }
    for i := 1; i <= n; i++ {
        target := s + sums[i-1]
        bound := sort.SearchInts(sums, target)
        if bound < 0 {
            bound = -bound - 1
        }
        if bound <= n {
            ans = min(ans, bound - (i - 1))
        }
    }
    if ans == math.MaxInt32 {
        return 0
    }
    return ans
}

func min(x, y int) int {
    if x < y {
        return x
    }
    return y
}
```

å¤æ‚åº¦åˆ†æ

- æ—¶é—´å¤æ‚åº¦ï¼š$O(n \log n)$, å…¶ä¸­ n æ˜¯æ•°ç»„çš„é•¿åº¦ã€‚éœ€è¦éå†æ¯ä¸ªä¸‹æ ‡ä½œä¸ºå­æ•°ç»„çš„å¼€å§‹ä¸‹æ ‡ï¼Œéå†çš„æ—¶é—´å¤æ‚åº¦æ˜¯ $O(n)$ï¼Œå¯¹äºæ¯ä¸ªå¼€å§‹ä¸‹æ ‡ï¼Œéœ€è¦é€šè¿‡äºŒåˆ†æŸ¥æ‰¾å¾—åˆ°é•¿åº¦æœ€å°çš„å­æ•°ç»„ï¼ŒäºŒåˆ†æŸ¥æ‰¾å¾—æ—¶é—´å¤æ‚åº¦æ˜¯ $O(\log n)$, å› æ­¤æ€»æ—¶é—´å¤æ‚åº¦æ˜¯ $O(n \log n)$ã€‚
- ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œå…¶ä¸­ n æ˜¯æ•°ç»„çš„é•¿åº¦ã€‚é¢å¤–åˆ›å»ºæ•°ç»„ $\text{sums}$ å­˜å‚¨å‰ç¼€å’Œã€‚


### æ–¹æ³•ä¸‰ï¼šåŒæŒ‡é’ˆ

åœ¨æ–¹æ³•ä¸€å’Œæ–¹æ³•äºŒä¸­ï¼Œéƒ½æ˜¯æ¯æ¬¡ç¡®å®šå­æ•°ç»„çš„å¼€å§‹ä¸‹æ ‡ï¼Œç„¶åå¾—åˆ°é•¿åº¦æœ€å°çš„å­æ•°ç»„ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦è¾ƒé«˜ã€‚ä¸ºäº†é™ä½æ—¶é—´å¤æ‚åº¦ï¼Œå¯ä»¥ä½¿ç”¨åŒæŒ‡é’ˆçš„æ–¹æ³•ã€‚

å®šä¹‰ä¸¤ä¸ªæŒ‡é’ˆ `start` å’Œ `end` åˆ†åˆ«è¡¨ç¤ºå­æ•°ç»„çš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®ï¼Œç»´æŠ¤å˜é‡ `sum` å­˜å‚¨å­æ•°ç»„ä¸­çš„å…ƒç´ å’Œï¼ˆå³ä» `nums[start]` åˆ° `nums[end]` çš„å…ƒç´ å’Œï¼‰ã€‚

åˆå§‹çŠ¶æ€ä¸‹ï¼Œ`start` å’Œ `end` éƒ½æŒ‡å‘ä¸‹æ ‡ 0ï¼Œ`sum` çš„å€¼ä¸º 0ã€‚

æ¯ä¸€è½®è¿­ä»£ï¼Œå°† `nums[end]` åŠ åˆ° `sum`ï¼Œå¦‚æœ `sum >= s`ï¼Œåˆ™æ›´æ–°å­æ•°ç»„çš„æœ€å°é•¿åº¦ï¼ˆæ­¤æ—¶å­æ•°ç»„çš„é•¿åº¦æ˜¯ `endâˆ’start+1`ï¼‰ï¼Œç„¶åå°† `nums[start]` ä» `sum` ä¸­å‡å»å¹¶å°† `start` å³ç§»ï¼Œç›´åˆ° `sum < s`ï¼Œ**åœ¨æ­¤è¿‡ç¨‹ä¸­åŒæ ·æ›´æ–°å­æ•°ç»„çš„æœ€å°é•¿åº¦**ã€‚åœ¨æ¯ä¸€è½®è¿­ä»£çš„æœ€åï¼Œå°† `end` å³ç§»ã€‚

![](assets/no_0209_minimum_size_subarray_sum.gif)

```go
func minSubArrayLen(s int, nums []int) int {
    n := len(nums)
    if n == 0 {
        return 0
    }
    ans := math.MaxInt32
    start, end := 0, 0
    sum := 0
    for end < n {
        sum += nums[end]
        for sum >= s {
            ans = min(ans, end - start + 1)
            sum -= nums[start]
            start++
        }
        end++
    }
    if ans == math.MaxInt32 {
        return 0
    }
    return ans
}

func min(x, y int) int {
    if x < y {
        return x
    }
    return y
}
```

å¤æ‚åº¦åˆ†æ

- æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œå…¶ä¸­ n æ˜¯æ•°ç»„çš„é•¿åº¦ã€‚æŒ‡é’ˆ `start` å’Œ `end` æœ€å¤šå„ç§»åŠ¨ n æ¬¡ã€‚
- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$ã€‚
